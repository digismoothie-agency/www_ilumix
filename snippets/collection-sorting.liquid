<!-- shop-top-bar start -->
<div class="shop-top-bar">
  {% include 'breadcrumb-builtin' %}
  {% if section.settings.tab_bar_enable %}
  <div class="product-view-mode">
    <!-- shop-item-filter-list start -->
      <a class="{% unless template contains 'list' %}{% endunless %} list-change-view grid-two" data-grid-view="2">
        <i class="feather-grid"></i>
      </a>
      <a class="{% if template contains 'list' %}{% endif %} list-change-view list-one" data-grid-view="1">
        <i class="feather-list"></i>
      </a>      
    <!-- shop-item-filter-list end -->
  </div>
  {% endif %}
  {% comment %}  <span class="tt-title-total listing-total-js">items({{ collection.all_products_count }})</span>{% endcomment %}
  {% if section.settings.short_by_enable %}
  <!-- product-short start -->
<div class="product-short">
<button id="btnFilter">{{section.settings.modal}}<i class="ti-angle-down"></i></button>
    {%- assign sort_by = collection.sort_by | default: collection.default_sort_by -%}
  
      <button id="btnSort" aria-controls="menu-currency" data-bs-target="#select-wrap" type="button" class="short-title" aria-describedby="FooterCountryLabel" >
        {%- liquid
          case sort_by
          when 'manual'
            echo 'collections.sorting.featured' | t
          when 'best-selling'
            echo 'collections.sorting.best_selling' | t
          when 'title-ascending'
            echo 'collections.sorting.az' | t
          when 'title-descending'
            echo 'collections.sorting.za' | t
          when 'price-ascending'
            echo 'collections.sorting.price_ascending' | t
          when 'price-descending'
            echo 'collections.sorting.price_descending' | t
          when 'created-descending'
            echo 'collections.sorting.date_descending' | t
          when 'created-ascending'
            echo 'collections.sorting.date_ascending' | t
          endcase
        -%}
        <i class="ti-angle-down"></i>
      </button>
      <div class="buttons">
        <button class="button-view grid-4 view-active" id="grid-4">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 13.5 12.5"><defs></defs><defs><style>.cls-1{fill-rule:evenodd}</style></defs><g id="Layer_2" data-name="Layer 2"><g id="Layer_1-2" data-name="Layer 1"><g id="shop_page" data-name="shop page"><g id="_4_col" data-name="4_col"><path id="Rectangle" d="M.75 0a.76.76 0 01.75.75v11a.76.76 0 01-.75.75.76.76 0 01-.75-.75v-11A.76.76 0 01.75 0z" class="cls-1"></path><path id="Rectangle-2" d="M4.75 0a.76.76 0 01.75.75v11a.76.76 0 01-.75.75.76.76 0 01-.75-.75v-11A.76.76 0 014.75 0z" class="cls-1" data-name="Rectangle"></path><path id="Rectangle-3" d="M8.75 0a.76.76 0 01.75.75v11a.76.76 0 01-.75.75.76.76 0 01-.75-.75v-11A.76.76 0 018.75 0z" class="cls-1" data-name="Rectangle"></path><path id="Rectangle-4" d="M12.75 0a.76.76 0 01.75.75v11a.76.76 0 01-.75.75.76.76 0 01-.75-.75v-11a.76.76 0 01.75-.75z" class="cls-1" data-name="Rectangle"></path></g></g></g></g></svg>
        </button>
        <button class="button-view grid-5" id="grid-5">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 17.5 12.5"><defs></defs><defs><style>.cls-1{fill-rule:evenodd}</style></defs><g id="Layer_2" data-name="Layer 2"><g id="Layer_1-2" data-name="Layer 1"><g id="shop_page" data-name="shop page"><g id="_5_col" data-name="5_col"><path id="Rectangle" d="M.75 0a.76.76 0 01.75.75v11a.76.76 0 01-.75.75.76.76 0 01-.75-.75v-11A.76.76 0 01.75 0z" class="cls-1"></path><path id="Rectangle-2" d="M4.75 0a.76.76 0 01.75.75v11a.76.76 0 01-.75.75.76.76 0 01-.75-.75v-11A.76.76 0 014.75 0z" class="cls-1" data-name="Rectangle"></path><path id="Rectangle-3" d="M8.75 0a.76.76 0 01.75.75v11a.76.76 0 01-.75.75.76.76 0 01-.75-.75v-11A.76.76 0 018.75 0z" class="cls-1" data-name="Rectangle"></path><path id="Rectangle-4" d="M12.75 0a.76.76 0 01.75.75v11a.76.76 0 01-.75.75.76.76 0 01-.75-.75v-11a.76.76 0 01.75-.75z" class="cls-1" data-name="Rectangle"></path><path id="Rectangle-5" d="M16.75 0a.76.76 0 01.75.75v11a.76.76 0 01-.75.75.76.76 0 01-.75-.75v-11a.76.76 0 01.75-.75z" class="cls-1" data-name="Rectangle"></path></g></g></g></g></svg>
        </button>
    </div>
</div>
  {% endif %}
  <!-- product-short end -->
</div>
<div id="sortContent" style="display:none;">
  <ul role="list">
    <li{% if sort_by == "manual" %} class="selected"{% endif %}><a href="?sort_by=manual">{{ 'collections.sorting.featured' | t }}</a></li>
    <li{% if sort_by == 'best-selling' %} class="selected"{% endif %}><a href="?sort_by=best-selling">{{ 'collections.sorting.best_selling' | t }}</a></li>
    <li{% if sort_by == 'title-ascending' %} class="selected"{% endif %}><a href="?sort_by=title-ascending">{{ 'collections.sorting.az' | t }}</a></li>
    <li{% if sort_by == 'title-descending' %} class="selected"{% endif %}><a href="?sort_by=title-descending">{{ 'collections.sorting.za' | t }}</a></li>
    <li{% if sort_by == 'price-ascending' %} class="selected"{% endif %}><a href="?sort_by=price-ascending">{{ 'collections.sorting.price_ascending' | t }}</a></li>
    <li{% if sort_by == 'price-descending' %}  class="selected"{% endif %}><a href="?sort_by=price-descending">{{ 'collections.sorting.price_descending' | t }}</a></li>
    <li{% if sort_by == 'created-descending' %} class="selected"{% endif %}><a href="?sort_by=created-descending">{{ 'collections.sorting.date_descending' | t }}</a></li>
    <li{% if sort_by == 'created-ascending' %} class="selected"{% endif %}><a href="?sort_by=created-ascending">{{ 'collections.sorting.date_ascending' | t }}</a></li>
  </ul>
</div>
<div id="filterContent" style="display:none;">
  <div class="shop-sidebar-wrap">
  <script src="{{ 'facets.js' | asset_url }}" defer="defer"></script>
      <div class="page-width" id="main-collection-filters" data-id="{{ section.id }}">
        {% render 'facets', results: collection %}
      </div>
  </div>
</div>
<!-- shop-top-bar end -->
<script>
  Shopify.queryParams = {};
  if (location.search.length) {
    for (var aKeyValue, i = 0, aCouples = location.search.substr(1).split('&'); i < aCouples.length; i++) {
      aKeyValue = aCouples[i].split('=');
      if (aKeyValue.length > 1) {
        Shopify.queryParams[decodeURIComponent(aKeyValue[0])] = decodeURIComponent(aKeyValue[1]);
      }
    }
  }
  $('.list-change-view').on("click",function () {
    event.preventDefault();
    var data_grid = $(this).attr('data-grid-view');
    if($('.shop-product-wrap').hasClass('grid-1') || $('.shop-product-wrap').hasClass('grid-2') || $('.shop-product-wrap').hasClass('grid-4')) {

      $('.shop-product-wrap').removeClass('grid-1');
      $('.shop-product-wrap').removeClass('grid-2');
      $('.shop-product-wrap').removeClass('grid-4');
      $('.shop-product-wrap').addClass('grid-'+data_grid);
    }else{
      $('.shop-product-wrap').addClass('grid-'+data_grid);
    }


  });


//filter collapse
var btnFilter = document.getElementById("btnFilter");
var contentFilter = document.getElementById("filterContent");
btnFilter.onclick = function() {
  if (contentFilter.style.display === "none") {
    contentFilter.style.display = "block";
  } else {
    contentFilter.style.display = "none";
  }
}

//sort collapse
var btnSort = document.getElementById("btnSort");
var contentSort = document.getElementById("sortContent");
btnSort.onclick = function() {
  if (contentSort.style.display === "none") {
    contentSort.style.display = "block";
  } else {
    contentSort.style.display = "none";
  }
}

//view change
$('.button-view').on('click',function(e) {
  e.preventDefault();
  if ($(this).hasClass('grid-4')) {
      $('#product-container').removeClass('grid-5').addClass('grid-4');
      $('#grid-4').addClass('view-active');
      $('#grid-5').removeClass('view-active');
      setView('grid-4');
  }
  else if($(this).hasClass('grid-5')) {
      $('#product-container').removeClass('grid-4').addClass('grid-5');
      $('#grid-5').addClass('view-active');
      $('#grid-4').removeClass('view-active');
      setView('grid-5');
  }
});


function setView(view) {
  localStorage.setItem('view', view);
}

function getView(view) {
  return localStorage.getItem('view');
}

var viewSelected = localStorage.getItem('view');

$(document).ready(function() {
  if(viewSelected == 'grid-5')
  $('#product-container').removeClass('grid-4').addClass('grid-5');
});
</script>
<style>
  .product-short .ti-angle-down{
    margin-left:10px;
  }
  #btnFilter{
    margin-right: 50px;
    color:#000;
  }
  #btnSort{
    color:#000;
  }
  #filterContent{
    background-color:#e7e8ea;
  }
  #sortContent{
    background-color:#e7e8ea;
    margin-bottom: 10px;
  }
  #sortContent ul{
    padding:30px;
    display: flex;
    display: flex;
    align-items: baseline;
    gap: 30px;
    flex-wrap: wrap;
  }
  #sortContent li a:hover{
    color:#232323;
  }
  #sortContent li a:before {
    content: '';
    display: inline-block;
    width: 16px;
    height: 16px;
    margin-right: 10px;
    background-color: white;
    border-radius: 10px;
    border: 1px solid white;
    position: relative;
    top: 3px;
    border: 4px solid white;
}

#sortContent li.selected a:before {
  outline:0;
  background-color: black;
}
  .shop-top-bar{
    display: flex;
    align-items: center;
    justify-content: space-between;
    margin-top: 30px;
    padding-bottom: 15px;
    position: relative;
    /* border-bottom: 1px solid #e2e2e2; */
  }
  .shop-top-bar .product-view-mode{
    display: flex;
  }
  .shop-top-bar .product-view-mode .list-change-view{
    color: #222;
    display: block;
    cursor: pointer;
    font-size: 20px;
    {% if settings.enable_rtl %}
    margin-left: 15px;
    padding-left: 15px;
    border-left: 1px solid #e2e2e2;
    {% else %}
    margin-right: 15px;
    padding-right: 15px;
    border-right: 1px solid #e2e2e2;
    {% endif %}
    line-height: 0;
  }
  .shop-top-bar .product-view-mode .list-change-view:last-child{
    {% if settings.enable_rtl %}
    margin-left: 0px;
    padding-left: 15px;
    border-left: none;
    {% else %}
    margin-right: 0px;
    padding-right: 0px;
    border-right: none;
    {% endif %}
  }
.product-short {
  position: relative;
  display: flex;
  align-items: center;
}
.product-short label {
  margin-bottom: 0;
  font-weight: 600;
  margin-right: 15px;
}
.product-short a.short-title{
  font-size: 14px;
  padding: 5px 15px;
  border: 1px solid #d7d7d7;
  height: 40px;
  min-width: 190px;
  display: flex;
  align-items: center;
  justify-content: space-between;
}
.product-short a.short-title i{
  padding-left: 15px;
  font-size: 12px;
}
.product-short ul{
  /* position: absolute; */
  left: 0;
  right: 0;
  width: max-content;
  top: 100%;
  background-color: #fff;
  z-index: 3;
  /* box-shadow: 0 0 35px rgb(0 0 0 / 10%); */
  min-width: 190px;
}
#select-wrap{
  /* position: absolute; */
  left: unset;
  right: 0;
  width: max-content;
  top: 100%;
  background-color: #fff;
  z-index: 3;
  box-shadow: 0 0 35px rgb(0 0 0 / 10%);
  min-width: 190px;
}
.product-short ul li a{
  padding: 0 15px;
  display: flex;
  align-items: center;
  height: 35px;
  width: 100%;
}
/* .product-short ul li.selected,
.product-short ul li:hover{
  background-color: #f5f5f5;
} */

  @media (max-width: 767px){
    .shop-top-bar{
      align-items: flex-start;
      flex-direction: column;
      margin-top: 20px;
    }
    .product-short{
      width: 100%;
      margin-top: 15px;
    }
    /* .product-short label{
      width: 80px;
    } */
    .product-short select{
      min-width: auto;
      width: 100%;
    }
  }
  /* The Modal (background) */
.modal {
  display: none; /* Hidden by default */
  position: fixed; /* Stay in place */
  z-index: 100; /* Sit on top */
  padding-top: 100px; /* Location of the box */
  left: 0;
  top: 0;
  width: 100%; /* Full width */
  height: 100%; /* Full height */
  overflow: auto; /* Enable scroll if needed */
  background-color: rgb(0,0,0); /* Fallback color */
  background-color: rgba(0,0,0,0.4); /* Black w/ opacity */
}
#myBtn{
  margin-right: 20px;
}
/* Modal Content */
.modal-content {
  background-color: #fefefe;
  margin: auto;
  padding: 20px;
  border: 1px solid #888;
  width: 80%;
}

/* The Close Button */
#close {
  color: #aaaaaa;
  float: right;
  font-size: 28px;
  text-align: right;
}

#close:hover,
#close:focus {
  color: #000;
  text-decoration: none;
  cursor: pointer;
}

.facet-checkbox {
      position: relative;
    }
    .facet-checkbox .icon-checkmark {
    visibility: hidden;
    position: absolute;
    left: 0.3rem;
    z-index: 5;
    top: 1.4rem;
}
  .facet-checkbox>input[type=checkbox]:checked~.icon-checkmark{
        visibility: visible;
  }

  @media(max-width:767px){
    .modal-content{
      width:100%;
      min-height: 100vh;
    }
  }
  .button-view svg{
    fill:black;
    width: 15px;
  }
  .buttons{
    margin-left:20px;
  }
  .button-view{
    background-color: #878787;
    margin-left:5px;
    width: 30px;
    height:30px;
  }
  .button-view:hover{
    background-color: black;
  }
  .button-view:hover svg{
    fill:white;
  }
  .view-active svg{
    fill:white;
  }
  .view-active{
    background-color: black;
  }
</style>